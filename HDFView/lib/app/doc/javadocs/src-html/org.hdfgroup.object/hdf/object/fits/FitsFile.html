<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>Source code</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="source: module: org.hdfgroup.object, package: hdf.object.fits, class: FitsFile">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line-1">/*****************************************************************************</span>
<span class="source-line-no">002</span><span id="line-2"> * Copyright by The HDF Group.                                               *</span>
<span class="source-line-no">003</span><span id="line-3"> * Copyright by the Board of Trustees of the University of Illinois.         *</span>
<span class="source-line-no">004</span><span id="line-4"> * All rights reserved.                                                      *</span>
<span class="source-line-no">005</span><span id="line-5"> *                                                                           *</span>
<span class="source-line-no">006</span><span id="line-6"> * This file is part of the HDF Java Products distribution.                  *</span>
<span class="source-line-no">007</span><span id="line-7"> * The full copyright notice, including terms governing use, modification,   *</span>
<span class="source-line-no">008</span><span id="line-8"> * and redistribution, is contained in the COPYING file, which can be found  *</span>
<span class="source-line-no">009</span><span id="line-9"> * at the root of the source code distribution tree,                         *</span>
<span class="source-line-no">010</span><span id="line-10"> * or in https://www.hdfgroup.org/licenses.                                  *</span>
<span class="source-line-no">011</span><span id="line-11"> * If you do not have access to either file, you may request a copy from     *</span>
<span class="source-line-no">012</span><span id="line-12"> * help@hdfgroup.org.                                                        *</span>
<span class="source-line-no">013</span><span id="line-13"> ****************************************************************************/</span>
<span class="source-line-no">014</span><span id="line-14"></span>
<span class="source-line-no">015</span><span id="line-15">package hdf.object.fits;</span>
<span class="source-line-no">016</span><span id="line-16"></span>
<span class="source-line-no">017</span><span id="line-17">import java.io.DataInput;</span>
<span class="source-line-no">018</span><span id="line-18">import java.io.IOException;</span>
<span class="source-line-no">019</span><span id="line-19">import java.io.InputStream;</span>
<span class="source-line-no">020</span><span id="line-20">import java.io.RandomAccessFile;</span>
<span class="source-line-no">021</span><span id="line-21"></span>
<span class="source-line-no">022</span><span id="line-22">import hdf.object.Attribute;</span>
<span class="source-line-no">023</span><span id="line-23">import hdf.object.Dataset;</span>
<span class="source-line-no">024</span><span id="line-24">import hdf.object.Datatype;</span>
<span class="source-line-no">025</span><span id="line-25">import hdf.object.FileFormat;</span>
<span class="source-line-no">026</span><span id="line-26">import hdf.object.Group;</span>
<span class="source-line-no">027</span><span id="line-27">import hdf.object.HObject;</span>
<span class="source-line-no">028</span><span id="line-28"></span>
<span class="source-line-no">029</span><span id="line-29">import org.slf4j.Logger;</span>
<span class="source-line-no">030</span><span id="line-30">import org.slf4j.LoggerFactory;</span>
<span class="source-line-no">031</span><span id="line-31"></span>
<span class="source-line-no">032</span><span id="line-32">import nom.tam.fits.AsciiTableHDU;</span>
<span class="source-line-no">033</span><span id="line-33">import nom.tam.fits.BasicHDU;</span>
<span class="source-line-no">034</span><span id="line-34">import nom.tam.fits.BinaryTableHDU;</span>
<span class="source-line-no">035</span><span id="line-35">import nom.tam.fits.Fits;</span>
<span class="source-line-no">036</span><span id="line-36">import nom.tam.fits.ImageHDU;</span>
<span class="source-line-no">037</span><span id="line-37">import nom.tam.fits.RandomGroupsHDU;</span>
<span class="source-line-no">038</span><span id="line-38">import nom.tam.fits.TableHDU;</span>
<span class="source-line-no">039</span><span id="line-39"></span>
<span class="source-line-no">040</span><span id="line-40">/**</span>
<span class="source-line-no">041</span><span id="line-41"> * This class provides file level APIs. File access APIs include retrieving the</span>
<span class="source-line-no">042</span><span id="line-42"> * file hierarchy, opening and closing file, and writing file content to disk.</span>
<span class="source-line-no">043</span><span id="line-43"> *</span>
<span class="source-line-no">044</span><span id="line-44"> * @version 2.4 9/4/2007</span>
<span class="source-line-no">045</span><span id="line-45"> * @author Peter X. Cao</span>
<span class="source-line-no">046</span><span id="line-46"> */</span>
<span class="source-line-no">047</span><span id="line-47">public class FitsFile extends FileFormat {</span>
<span class="source-line-no">048</span><span id="line-48">    private static final long serialVersionUID = -1965689032980605791L;</span>
<span class="source-line-no">049</span><span id="line-49"></span>
<span class="source-line-no">050</span><span id="line-50">    private static final Logger log = LoggerFactory.getLogger(FitsFile.class);</span>
<span class="source-line-no">051</span><span id="line-51"></span>
<span class="source-line-no">052</span><span id="line-52">    /**</span>
<span class="source-line-no">053</span><span id="line-53">     * The root object of the file hierarchy.</span>
<span class="source-line-no">054</span><span id="line-54">     */</span>
<span class="source-line-no">055</span><span id="line-55">    private HObject rootObject;</span>
<span class="source-line-no">056</span><span id="line-56"></span>
<span class="source-line-no">057</span><span id="line-57">    /** the fits file */</span>
<span class="source-line-no">058</span><span id="line-58">    private Fits fitsFile;</span>
<span class="source-line-no">059</span><span id="line-59"></span>
<span class="source-line-no">060</span><span id="line-60">    private static boolean isFileOpen;</span>
<span class="source-line-no">061</span><span id="line-61"></span>
<span class="source-line-no">062</span><span id="line-62">    /**</span>
<span class="source-line-no">063</span><span id="line-63">     * Constructs an empty FitsFile with read-only access.</span>
<span class="source-line-no">064</span><span id="line-64">     */</span>
<span class="source-line-no">065</span><span id="line-65">    public FitsFile() { this(""); }</span>
<span class="source-line-no">066</span><span id="line-66"></span>
<span class="source-line-no">067</span><span id="line-67">    /**</span>
<span class="source-line-no">068</span><span id="line-68">     * Constructs an FitsFile object of given file name with read-only access.</span>
<span class="source-line-no">069</span><span id="line-69">     *</span>
<span class="source-line-no">070</span><span id="line-70">     * @param pathname the file name.</span>
<span class="source-line-no">071</span><span id="line-71">     */</span>
<span class="source-line-no">072</span><span id="line-72">    public FitsFile(String pathname)</span>
<span class="source-line-no">073</span><span id="line-73">    {</span>
<span class="source-line-no">074</span><span id="line-74">        super(pathname);</span>
<span class="source-line-no">075</span><span id="line-75"></span>
<span class="source-line-no">076</span><span id="line-76">        isReadOnly = true;</span>
<span class="source-line-no">077</span><span id="line-77">        isFileOpen = false;</span>
<span class="source-line-no">078</span><span id="line-78">        this.fid   = -1;</span>
<span class="source-line-no">079</span><span id="line-79">        try {</span>
<span class="source-line-no">080</span><span id="line-80">            fitsFile = new Fits(fullFileName);</span>
<span class="source-line-no">081</span><span id="line-81">        }</span>
<span class="source-line-no">082</span><span id="line-82">        catch (Exception ex) {</span>
<span class="source-line-no">083</span><span id="line-83">            if (!pathname.isEmpty())</span>
<span class="source-line-no">084</span><span id="line-84">                log.debug("Fits({}):", fullFileName, ex);</span>
<span class="source-line-no">085</span><span id="line-85">        }</span>
<span class="source-line-no">086</span><span id="line-86">    }</span>
<span class="source-line-no">087</span><span id="line-87"></span>
<span class="source-line-no">088</span><span id="line-88">    /**</span>
<span class="source-line-no">089</span><span id="line-89">     * Checks if the given file format is a Fits file.</span>
<span class="source-line-no">090</span><span id="line-90">     *</span>
<span class="source-line-no">091</span><span id="line-91">     * @param fileformat the fileformat to be checked.</span>
<span class="source-line-no">092</span><span id="line-92">     *</span>
<span class="source-line-no">093</span><span id="line-93">     * @return true if the given file is an Fits file; otherwise returns false.</span>
<span class="source-line-no">094</span><span id="line-94">     */</span>
<span class="source-line-no">095</span><span id="line-95">    @Override</span>
<span class="source-line-no">096</span><span id="line-96">    public boolean isThisType(FileFormat fileformat)</span>
<span class="source-line-no">097</span><span id="line-97">    {</span>
<span class="source-line-no">098</span><span id="line-98">        return (fileformat instanceof FitsFile);</span>
<span class="source-line-no">099</span><span id="line-99">    }</span>
<span class="source-line-no">100</span><span id="line-100"></span>
<span class="source-line-no">101</span><span id="line-101">    /**</span>
<span class="source-line-no">102</span><span id="line-102">     * Checks if a given file is a Fits file.</span>
<span class="source-line-no">103</span><span id="line-103">     *</span>
<span class="source-line-no">104</span><span id="line-104">     * @param filename the file to be checked.</span>
<span class="source-line-no">105</span><span id="line-105">     *</span>
<span class="source-line-no">106</span><span id="line-106">     * @return true if the given file is an Fits file; otherwise returns false.</span>
<span class="source-line-no">107</span><span id="line-107">     */</span>
<span class="source-line-no">108</span><span id="line-108">    @Override</span>
<span class="source-line-no">109</span><span id="line-109">    public boolean isThisType(String filename)</span>
<span class="source-line-no">110</span><span id="line-110">    {</span>
<span class="source-line-no">111</span><span id="line-111">        boolean is_fits      = false;</span>
<span class="source-line-no">112</span><span id="line-112">        RandomAccessFile raf = null;</span>
<span class="source-line-no">113</span><span id="line-113">        try {</span>
<span class="source-line-no">114</span><span id="line-114">            raf = new RandomAccessFile(filename, "r");</span>
<span class="source-line-no">115</span><span id="line-115">        }</span>
<span class="source-line-no">116</span><span id="line-116">        catch (Exception ex) {</span>
<span class="source-line-no">117</span><span id="line-117">            raf = null;</span>
<span class="source-line-no">118</span><span id="line-118">        }</span>
<span class="source-line-no">119</span><span id="line-119"></span>
<span class="source-line-no">120</span><span id="line-120">        if (raf == null)</span>
<span class="source-line-no">121</span><span id="line-121">            return false;</span>
<span class="source-line-no">122</span><span id="line-122"></span>
<span class="source-line-no">123</span><span id="line-123">        byte[] header = new byte[80];</span>
<span class="source-line-no">124</span><span id="line-124">        try {</span>
<span class="source-line-no">125</span><span id="line-125">            raf.read(header);</span>
<span class="source-line-no">126</span><span id="line-126">        }</span>
<span class="source-line-no">127</span><span id="line-127">        catch (Exception ex) {</span>
<span class="source-line-no">128</span><span id="line-128">            header = null;</span>
<span class="source-line-no">129</span><span id="line-129">        }</span>
<span class="source-line-no">130</span><span id="line-130"></span>
<span class="source-line-no">131</span><span id="line-131">        if (header != null) {</span>
<span class="source-line-no">132</span><span id="line-132">            String front = new String(header, 0, 9);</span>
<span class="source-line-no">133</span><span id="line-133">            if (!front.startsWith("SIMPLE  =")) {</span>
<span class="source-line-no">134</span><span id="line-134">                try {</span>
<span class="source-line-no">135</span><span id="line-135">                    raf.close();</span>
<span class="source-line-no">136</span><span id="line-136">                }</span>
<span class="source-line-no">137</span><span id="line-137">                catch (Exception ex) {</span>
<span class="source-line-no">138</span><span id="line-138">                    log.debug("closing RandomAccessFile({}):", filename, ex);</span>
<span class="source-line-no">139</span><span id="line-139">                }</span>
<span class="source-line-no">140</span><span id="line-140">                return false;</span>
<span class="source-line-no">141</span><span id="line-141">            }</span>
<span class="source-line-no">142</span><span id="line-142"></span>
<span class="source-line-no">143</span><span id="line-143">            String back = new String(header, 9, 70);</span>
<span class="source-line-no">144</span><span id="line-144">            back        = back.trim();</span>
<span class="source-line-no">145</span><span id="line-145">            if ((back.length() &lt; 1) || (back.charAt(0) != 'T')) {</span>
<span class="source-line-no">146</span><span id="line-146">                try {</span>
<span class="source-line-no">147</span><span id="line-147">                    raf.close();</span>
<span class="source-line-no">148</span><span id="line-148">                }</span>
<span class="source-line-no">149</span><span id="line-149">                catch (Exception ex) {</span>
<span class="source-line-no">150</span><span id="line-150">                    log.debug("closing RandomAccessFile({}):", filename, ex);</span>
<span class="source-line-no">151</span><span id="line-151">                }</span>
<span class="source-line-no">152</span><span id="line-152">                return false;</span>
<span class="source-line-no">153</span><span id="line-153">            }</span>
<span class="source-line-no">154</span><span id="line-154"></span>
<span class="source-line-no">155</span><span id="line-155">            is_fits = true;</span>
<span class="source-line-no">156</span><span id="line-156">            ;</span>
<span class="source-line-no">157</span><span id="line-157">        }</span>
<span class="source-line-no">158</span><span id="line-158"></span>
<span class="source-line-no">159</span><span id="line-159">        try {</span>
<span class="source-line-no">160</span><span id="line-160">            raf.close();</span>
<span class="source-line-no">161</span><span id="line-161">        }</span>
<span class="source-line-no">162</span><span id="line-162">        catch (Exception ex) {</span>
<span class="source-line-no">163</span><span id="line-163">            log.debug("closing RandomAccessFile({}):", filename, ex);</span>
<span class="source-line-no">164</span><span id="line-164">        }</span>
<span class="source-line-no">165</span><span id="line-165"></span>
<span class="source-line-no">166</span><span id="line-166">        return is_fits;</span>
<span class="source-line-no">167</span><span id="line-167">    }</span>
<span class="source-line-no">168</span><span id="line-168"></span>
<span class="source-line-no">169</span><span id="line-169">    /**</span>
<span class="source-line-no">170</span><span id="line-170">     * Creates a FitsFile instance with specified file name and READ access.</span>
<span class="source-line-no">171</span><span id="line-171">     *</span>
<span class="source-line-no">172</span><span id="line-172">     * @param filename the full path name of the file.</span>
<span class="source-line-no">173</span><span id="line-173">     * @param access the access properties of the file.</span>
<span class="source-line-no">174</span><span id="line-174">     * Regardless of specified access, the FitsFile implementation uses* READ.</span>
<span class="source-line-no">175</span><span id="line-175">     *</span>
<span class="source-line-no">176</span><span id="line-176">     * @return the Fits file.</span>
<span class="source-line-no">177</span><span id="line-177">     *</span>
<span class="source-line-no">178</span><span id="line-178">     * @throws Exception</span>
<span class="source-line-no">179</span><span id="line-179">     *             The exception thrown from the File class.</span>
<span class="source-line-no">180</span><span id="line-180">     */</span>
<span class="source-line-no">181</span><span id="line-181">    @Override</span>
<span class="source-line-no">182</span><span id="line-182">    public FileFormat createInstance(String filename, int access) throws Exception</span>
<span class="source-line-no">183</span><span id="line-183">    {</span>
<span class="source-line-no">184</span><span id="line-184">        return new FitsFile(filename);</span>
<span class="source-line-no">185</span><span id="line-185">    }</span>
<span class="source-line-no">186</span><span id="line-186"></span>
<span class="source-line-no">187</span><span id="line-187">    // Implementing FileFormat</span>
<span class="source-line-no">188</span><span id="line-188">    @Override</span>
<span class="source-line-no">189</span><span id="line-189">    public long open() throws Exception</span>
<span class="source-line-no">190</span><span id="line-190">    {</span>
<span class="source-line-no">191</span><span id="line-191">        if (!isFileOpen) {</span>
<span class="source-line-no">192</span><span id="line-192">            isFileOpen = true;</span>
<span class="source-line-no">193</span><span id="line-193">            rootObject = loadTree();</span>
<span class="source-line-no">194</span><span id="line-194">        }</span>
<span class="source-line-no">195</span><span id="line-195"></span>
<span class="source-line-no">196</span><span id="line-196">        return 0;</span>
<span class="source-line-no">197</span><span id="line-197">    }</span>
<span class="source-line-no">198</span><span id="line-198"></span>
<span class="source-line-no">199</span><span id="line-199">    private HObject loadTree()</span>
<span class="source-line-no">200</span><span id="line-200">    {</span>
<span class="source-line-no">201</span><span id="line-201">        long[] oid = {0};</span>
<span class="source-line-no">202</span><span id="line-202">        // root object does not have a parent path or a parent node</span>
<span class="source-line-no">203</span><span id="line-203">        FitsGroup rootGroup = new FitsGroup(this, "/", null, null, oid);</span>
<span class="source-line-no">204</span><span id="line-204"></span>
<span class="source-line-no">205</span><span id="line-205">        if (fitsFile == null)</span>
<span class="source-line-no">206</span><span id="line-206">            return rootGroup;</span>
<span class="source-line-no">207</span><span id="line-207"></span>
<span class="source-line-no">208</span><span id="line-208">        BasicHDU[] hdus = null;</span>
<span class="source-line-no">209</span><span id="line-209"></span>
<span class="source-line-no">210</span><span id="line-210">        try {</span>
<span class="source-line-no">211</span><span id="line-211">            hdus = fitsFile.read();</span>
<span class="source-line-no">212</span><span id="line-212">        }</span>
<span class="source-line-no">213</span><span id="line-213">        catch (Exception ex) {</span>
<span class="source-line-no">214</span><span id="line-214">            log.debug("fitsFile.read():", ex);</span>
<span class="source-line-no">215</span><span id="line-215">        }</span>
<span class="source-line-no">216</span><span id="line-216"></span>
<span class="source-line-no">217</span><span id="line-217">        if (hdus == null)</span>
<span class="source-line-no">218</span><span id="line-218">            return rootGroup;</span>
<span class="source-line-no">219</span><span id="line-219"></span>
<span class="source-line-no">220</span><span id="line-220">        int n          = hdus.length;</span>
<span class="source-line-no">221</span><span id="line-221">        int nImageHDU  = 0;</span>
<span class="source-line-no">222</span><span id="line-222">        int nTableHDU  = 0;</span>
<span class="source-line-no">223</span><span id="line-223">        String hduName = null;</span>
<span class="source-line-no">224</span><span id="line-224">        BasicHDU hdu   = null;</span>
<span class="source-line-no">225</span><span id="line-225">        for (int i = 0; i &lt; n; i++) {</span>
<span class="source-line-no">226</span><span id="line-226">            hdu     = hdus[i];</span>
<span class="source-line-no">227</span><span id="line-227">            hduName = null;</span>
<span class="source-line-no">228</span><span id="line-228">            // only deal with ImageHDU and TableHDU</span>
<span class="source-line-no">229</span><span id="line-229">            if (hdu instanceof ImageHDU) {</span>
<span class="source-line-no">230</span><span id="line-230">                hduName = "ImageHDU #" + nImageHDU++;</span>
<span class="source-line-no">231</span><span id="line-231">            }</span>
<span class="source-line-no">232</span><span id="line-232">            else if (hdu instanceof RandomGroupsHDU) {</span>
<span class="source-line-no">233</span><span id="line-233">                hduName = "RandomGroupsHDU #" + nImageHDU++;</span>
<span class="source-line-no">234</span><span id="line-234">            }</span>
<span class="source-line-no">235</span><span id="line-235">            else if (hdu instanceof TableHDU) {</span>
<span class="source-line-no">236</span><span id="line-236">                if (hdu instanceof AsciiTableHDU)</span>
<span class="source-line-no">237</span><span id="line-237">                    hduName = "AsciiTableHDU #" + nTableHDU++;</span>
<span class="source-line-no">238</span><span id="line-238">                else if (hdu instanceof BinaryTableHDU)</span>
<span class="source-line-no">239</span><span id="line-239">                    hduName = "BinaryTableHDU #" + nTableHDU++;</span>
<span class="source-line-no">240</span><span id="line-240">                else</span>
<span class="source-line-no">241</span><span id="line-241">                    hduName = "TableHDU #" + nTableHDU++;</span>
<span class="source-line-no">242</span><span id="line-242">            }</span>
<span class="source-line-no">243</span><span id="line-243"></span>
<span class="source-line-no">244</span><span id="line-244">            if (hduName != null) {</span>
<span class="source-line-no">245</span><span id="line-245">                oid[0]        = hdu.hashCode();</span>
<span class="source-line-no">246</span><span id="line-246">                FitsDataset d = new FitsDataset(this, hdu, hduName, oid);</span>
<span class="source-line-no">247</span><span id="line-247">                rootGroup.addToMemberList(d);</span>
<span class="source-line-no">248</span><span id="line-248">            }</span>
<span class="source-line-no">249</span><span id="line-249">        }</span>
<span class="source-line-no">250</span><span id="line-250"></span>
<span class="source-line-no">251</span><span id="line-251">        return rootGroup;</span>
<span class="source-line-no">252</span><span id="line-252">    }</span>
<span class="source-line-no">253</span><span id="line-253"></span>
<span class="source-line-no">254</span><span id="line-254">    // Implementing FileFormat</span>
<span class="source-line-no">255</span><span id="line-255">    @Override</span>
<span class="source-line-no">256</span><span id="line-256">    public void close() throws IOException</span>
<span class="source-line-no">257</span><span id="line-257">    {</span>
<span class="source-line-no">258</span><span id="line-258">        if (fitsFile == null)</span>
<span class="source-line-no">259</span><span id="line-259">            return;</span>
<span class="source-line-no">260</span><span id="line-260"></span>
<span class="source-line-no">261</span><span id="line-261">        DataInput di = fitsFile.getStream();</span>
<span class="source-line-no">262</span><span id="line-262">        if (di instanceof InputStream)</span>
<span class="source-line-no">263</span><span id="line-263">            ((InputStream)di).close();</span>
<span class="source-line-no">264</span><span id="line-264">    }</span>
<span class="source-line-no">265</span><span id="line-265"></span>
<span class="source-line-no">266</span><span id="line-266">    // Implementing FileFormat</span>
<span class="source-line-no">267</span><span id="line-267">    @Override</span>
<span class="source-line-no">268</span><span id="line-268">    public HObject getRootObject()</span>
<span class="source-line-no">269</span><span id="line-269">    {</span>
<span class="source-line-no">270</span><span id="line-270">        return rootObject;</span>
<span class="source-line-no">271</span><span id="line-271">    }</span>
<span class="source-line-no">272</span><span id="line-272"></span>
<span class="source-line-no">273</span><span id="line-273">    /**</span>
<span class="source-line-no">274</span><span id="line-274">     * Get the Fits file.</span>
<span class="source-line-no">275</span><span id="line-275">     *</span>
<span class="source-line-no">276</span><span id="line-276">     * @return the Fits file.</span>
<span class="source-line-no">277</span><span id="line-277">     */</span>
<span class="source-line-no">278</span><span id="line-278">    public Fits getFitsFile() { return fitsFile; }</span>
<span class="source-line-no">279</span><span id="line-279"></span>
<span class="source-line-no">280</span><span id="line-280">    // implementign FileFormat</span>
<span class="source-line-no">281</span><span id="line-281">    @Override</span>
<span class="source-line-no">282</span><span id="line-282">    public Group createGroup(String name, Group pgroup) throws Exception</span>
<span class="source-line-no">283</span><span id="line-283">    {</span>
<span class="source-line-no">284</span><span id="line-284">        throw new UnsupportedOperationException("Unsupported createGroup operation for Fits.");</span>
<span class="source-line-no">285</span><span id="line-285">    }</span>
<span class="source-line-no">286</span><span id="line-286"></span>
<span class="source-line-no">287</span><span id="line-287">    // implementign FileFormat</span>
<span class="source-line-no">288</span><span id="line-288">    @Override</span>
<span class="source-line-no">289</span><span id="line-289">    public Datatype createDatatype(int tclass, int tsize, int torder, int tsign) throws Exception</span>
<span class="source-line-no">290</span><span id="line-290">    {</span>
<span class="source-line-no">291</span><span id="line-291">        throw new UnsupportedOperationException("Unsupported createDatatype operation for Fits.");</span>
<span class="source-line-no">292</span><span id="line-292">    }</span>
<span class="source-line-no">293</span><span id="line-293"></span>
<span class="source-line-no">294</span><span id="line-294">    // implementign FileFormat</span>
<span class="source-line-no">295</span><span id="line-295">    @Override</span>
<span class="source-line-no">296</span><span id="line-296">    public Datatype createNamedDatatype(Datatype tnative, String name) throws Exception</span>
<span class="source-line-no">297</span><span id="line-297">    {</span>
<span class="source-line-no">298</span><span id="line-298">        throw new UnsupportedOperationException("Fits does not support named datatype.");</span>
<span class="source-line-no">299</span><span id="line-299">    }</span>
<span class="source-line-no">300</span><span id="line-300"></span>
<span class="source-line-no">301</span><span id="line-301">    // implementign FileFormat</span>
<span class="source-line-no">302</span><span id="line-302">    @Override</span>
<span class="source-line-no">303</span><span id="line-303">    public Dataset createScalarDS(String name, Group pgroup, Datatype type, long[] dims, long[] maxdims,</span>
<span class="source-line-no">304</span><span id="line-304">                                  long[] chunks, int gzip, Object fillValue, Object data) throws Exception</span>
<span class="source-line-no">305</span><span id="line-305">    {</span>
<span class="source-line-no">306</span><span id="line-306">        throw new UnsupportedOperationException("Unsupported createScalarDS operation.");</span>
<span class="source-line-no">307</span><span id="line-307">    }</span>
<span class="source-line-no">308</span><span id="line-308"></span>
<span class="source-line-no">309</span><span id="line-309">    // implementign FileFormat</span>
<span class="source-line-no">310</span><span id="line-310">    @Override</span>
<span class="source-line-no">311</span><span id="line-311">    public Dataset createImage(String name, Group pgroup, Datatype type, long[] dims, long[] maxdims,</span>
<span class="source-line-no">312</span><span id="line-312">                               long[] chunks, int gzip, int ncomp, int intelace, Object data) throws Exception</span>
<span class="source-line-no">313</span><span id="line-313">    {</span>
<span class="source-line-no">314</span><span id="line-314">        throw new UnsupportedOperationException("Unsupported createImage operation.");</span>
<span class="source-line-no">315</span><span id="line-315">    }</span>
<span class="source-line-no">316</span><span id="line-316"></span>
<span class="source-line-no">317</span><span id="line-317">    // implementing FileFormat</span>
<span class="source-line-no">318</span><span id="line-318">    @Override</span>
<span class="source-line-no">319</span><span id="line-319">    public void delete(HObject obj)throws Exception</span>
<span class="source-line-no">320</span><span id="line-320">    {</span>
<span class="source-line-no">321</span><span id="line-321">        throw new UnsupportedOperationException("Unsupported delete operation.");</span>
<span class="source-line-no">322</span><span id="line-322">    }</span>
<span class="source-line-no">323</span><span id="line-323"></span>
<span class="source-line-no">324</span><span id="line-324">    // implementing FileFormat</span>
<span class="source-line-no">325</span><span id="line-325">    @Override</span>
<span class="source-line-no">326</span><span id="line-326">    public HObject copy(HObject srcObj, Group dstGroup, String dstName) throws Exception</span>
<span class="source-line-no">327</span><span id="line-327">    {</span>
<span class="source-line-no">328</span><span id="line-328">        throw new UnsupportedOperationException("Unsupported copy operation.");</span>
<span class="source-line-no">329</span><span id="line-329">    }</span>
<span class="source-line-no">330</span><span id="line-330"></span>
<span class="source-line-no">331</span><span id="line-331">    /**</span>
<span class="source-line-no">332</span><span id="line-332">     * copy a dataset into another group.</span>
<span class="source-line-no">333</span><span id="line-333">     *</span>
<span class="source-line-no">334</span><span id="line-334">     * @param srcDataset the dataset to be copied.</span>
<span class="source-line-no">335</span><span id="line-335">     * @param pgroup the group where the dataset is copied to.</span>
<span class="source-line-no">336</span><span id="line-336">     *</span>
<span class="source-line-no">337</span><span id="line-337">     * @return the treeNode containing the new copy of the dataset.</span>
<span class="source-line-no">338</span><span id="line-338">     */</span>
<span class="source-line-no">339</span><span id="line-339">    private void copyDataset(Dataset srcDataset, FitsGroup pgroup) throws Exception</span>
<span class="source-line-no">340</span><span id="line-340">    {</span>
<span class="source-line-no">341</span><span id="line-341">        throw new UnsupportedOperationException("Unsupported copyDataset operation.");</span>
<span class="source-line-no">342</span><span id="line-342">    }</span>
<span class="source-line-no">343</span><span id="line-343"></span>
<span class="source-line-no">344</span><span id="line-344">    private void copyGroup(FitsGroup srcGroup, FitsGroup pgroup) throws Exception</span>
<span class="source-line-no">345</span><span id="line-345">    {</span>
<span class="source-line-no">346</span><span id="line-346">        throw new UnsupportedOperationException("Unsupported copyGroup operation.");</span>
<span class="source-line-no">347</span><span id="line-347">    }</span>
<span class="source-line-no">348</span><span id="line-348"></span>
<span class="source-line-no">349</span><span id="line-349">    /**</span>
<span class="source-line-no">350</span><span id="line-350">     * Copies the attributes of one object to another object.</span>
<span class="source-line-no">351</span><span id="line-351">     *</span>
<span class="source-line-no">352</span><span id="line-352">     * FITS does not support attributes</span>
<span class="source-line-no">353</span><span id="line-353">     *</span>
<span class="source-line-no">354</span><span id="line-354">     * @param src</span>
<span class="source-line-no">355</span><span id="line-355">     *            The source object.</span>
<span class="source-line-no">356</span><span id="line-356">     * @param dst</span>
<span class="source-line-no">357</span><span id="line-357">     *            The destination object.</span>
<span class="source-line-no">358</span><span id="line-358">     *</span>
<span class="source-line-no">359</span><span id="line-359">     * @see #copyAttributes(long, long)</span>
<span class="source-line-no">360</span><span id="line-360">     */</span>
<span class="source-line-no">361</span><span id="line-361">    public void copyAttributes(HObject src, HObject dst)</span>
<span class="source-line-no">362</span><span id="line-362">    {</span>
<span class="source-line-no">363</span><span id="line-363">        throw new UnsupportedOperationException("Unsupported copyAttributes operation.");</span>
<span class="source-line-no">364</span><span id="line-364">    }</span>
<span class="source-line-no">365</span><span id="line-365"></span>
<span class="source-line-no">366</span><span id="line-366">    /**</span>
<span class="source-line-no">367</span><span id="line-367">     * Copies the attributes of one object to another object.</span>
<span class="source-line-no">368</span><span id="line-368">     *</span>
<span class="source-line-no">369</span><span id="line-369">     * FITS does not support attributes</span>
<span class="source-line-no">370</span><span id="line-370">     *</span>
<span class="source-line-no">371</span><span id="line-371">     * @param srcID</span>
<span class="source-line-no">372</span><span id="line-372">     *            The source identifier.</span>
<span class="source-line-no">373</span><span id="line-373">     * @param dstID</span>
<span class="source-line-no">374</span><span id="line-374">     *            The destination identifier.</span>
<span class="source-line-no">375</span><span id="line-375">     *</span>
<span class="source-line-no">376</span><span id="line-376">     * @see #copyAttributes(long, long)</span>
<span class="source-line-no">377</span><span id="line-377">     */</span>
<span class="source-line-no">378</span><span id="line-378">    public void copyAttributes(long srcID, long dstID)</span>
<span class="source-line-no">379</span><span id="line-379">    {</span>
<span class="source-line-no">380</span><span id="line-380">        throw new UnsupportedOperationException("Unsupported copyAttributes with id operation.");</span>
<span class="source-line-no">381</span><span id="line-381">    }</span>
<span class="source-line-no">382</span><span id="line-382"></span>
<span class="source-line-no">383</span><span id="line-383">    /**</span>
<span class="source-line-no">384</span><span id="line-384">     * Creates a new attribute and attached to the object if attribute does</span>
<span class="source-line-no">385</span><span id="line-385">     * not exist. Otherwise, just update the value of the attribute.</span>
<span class="source-line-no">386</span><span id="line-386">     *</span>
<span class="source-line-no">387</span><span id="line-387">     * @param obj</span>
<span class="source-line-no">388</span><span id="line-388">     *        the object which the attribute is to be attached to.</span>
<span class="source-line-no">389</span><span id="line-389">     * @param attr</span>
<span class="source-line-no">390</span><span id="line-390">     *        the atribute to attach.</span>
<span class="source-line-no">391</span><span id="line-391">     * @param attrExisted</span>
<span class="source-line-no">392</span><span id="line-392">     *        The indicator if the given attribute exists.</span>
<span class="source-line-no">393</span><span id="line-393">     */</span>
<span class="source-line-no">394</span><span id="line-394">    @Override</span>
<span class="source-line-no">395</span><span id="line-395">    public void writeAttribute(HObject obj, hdf.object.Attribute attr, boolean attrExisted) throws Exception</span>
<span class="source-line-no">396</span><span id="line-396">    {</span>
<span class="source-line-no">397</span><span id="line-397">        throw new UnsupportedOperationException("Unsupported operation.");</span>
<span class="source-line-no">398</span><span id="line-398">    }</span>
<span class="source-line-no">399</span><span id="line-399"></span>
<span class="source-line-no">400</span><span id="line-400">    /**</span>
<span class="source-line-no">401</span><span id="line-401">     *  Returns the version of the library.</span>
<span class="source-line-no">402</span><span id="line-402">     */</span>
<span class="source-line-no">403</span><span id="line-403">    @Override</span>
<span class="source-line-no">404</span><span id="line-404">    public String getLibversion()</span>
<span class="source-line-no">405</span><span id="line-405">    {</span>
<span class="source-line-no">406</span><span id="line-406">        String ver = "Fits Java (version 2.4)";</span>
<span class="source-line-no">407</span><span id="line-407"></span>
<span class="source-line-no">408</span><span id="line-408">        return ver;</span>
<span class="source-line-no">409</span><span id="line-409">    }</span>
<span class="source-line-no">410</span><span id="line-410"></span>
<span class="source-line-no">411</span><span id="line-411">    // implementing FileFormat</span>
<span class="source-line-no">412</span><span id="line-412">    @Override</span>
<span class="source-line-no">413</span><span id="line-413">    public HObject get(String path) throws Exception</span>
<span class="source-line-no">414</span><span id="line-414">    {</span>
<span class="source-line-no">415</span><span id="line-415">        throw new UnsupportedOperationException("get() is not supported");</span>
<span class="source-line-no">416</span><span id="line-416">    }</span>
<span class="source-line-no">417</span><span id="line-417">}</span>




























































</pre>
</div>
</main>
</body>
</html>
